# Minimal tmux config for proj2
# Modern tmux (3.x+) with zsh/prezto/p10k support

# Shell configuration - ensure login shells with full config
set -g default-shell "/bin/zsh"
set -g default-command "/bin/zsh -l"

# Fix terminal colors and features
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Fix escape lag (critical for vim/shell responsiveness)
set -sg escape-time 0

# Clipboard integration (macOS)
set -g set-clipboard on

# Scrollback history
set -g history-limit 50000

# Mouse support (optional - scroll and click to switch panes)
set -g mouse on

# Don't exit copy mode after mouse selection
unbind -T copy-mode-vi MouseDragEnd1Pane

# ============================================================================
# VERBOSE COMMAND DISPLAY OPTIONS
# ============================================================================
# Choose ONE of the following options (uncomment the one you want):

# OPTION 2: Popup messages when you run commands (temporary display at top)
# Shows full command syntax - great for learning
# source-file conf.d/tmux-verbose-bindings.conf

# OPTION 3: Show last command in status bar (permanent display at bottom)
# Shows abbreviated action with icons - less intrusive
source-file ~/icode/dotfiles/config/tmux/conf.d/tmux-command-echo.conf

# Show messages for 2 seconds (for popup messages)
set -g display-time 2000

# Start windows and panes at 1, not 0 (easier to reach on keyboard)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Status bar styling (minimal)
# Note: status-left and status-right are overridden by command-echo option
set -g status-style 'bg=black fg=white'

# Keybinding to show help popup (Ctrl-b /)
bind-key / display-popup -E -w 80% -h 80% "cat <<'HELP'
╔════════════════════════════════════════════════════════════╗
║              TMUX KEYBOARD SHORTCUTS                       ║
╠════════════════════════════════════════════════════════════╣
║ ALL SHORTCUTS START WITH: Ctrl-b (the prefix)             ║
╠════════════════════════════════════════════════════════════╣
║ PANE NAVIGATION                                            ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b o         Switch to next pane                       ║
║ Ctrl-b ;         Switch to last active pane                ║
║ Ctrl-b q         Show pane numbers (type number to jump)   ║
║ Click pane       Switch to pane (mouse mode)               ║
╠════════════════════════════════════════════════════════════╣
║ SCROLLING & COPY MODE                                      ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b [         Enter scroll/copy mode                    ║
║   q              Exit scroll/copy mode                     ║
║   Arrow keys     Scroll up/down                            ║
║   Page Up/Down   Scroll by page                            ║
║ Mouse scroll     Scroll (when not in copy mode)            ║
╠════════════════════════════════════════════════════════════╣
║ SESSION MANAGEMENT                                         ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b d         Detach (session keeps running)            ║
║ Ctrl-b $         Rename session                            ║
╠════════════════════════════════════════════════════════════╣
║ PANE MANAGEMENT                                            ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b %         Split pane vertically (left/right)        ║
║ Ctrl-b \"         Split pane horizontally (top/bottom)      ║
║ Ctrl-b x         Kill current pane (prompts confirm)       ║
║ Ctrl-b z         Zoom/unzoom current pane (fullscreen)     ║
║ Ctrl-b {         Swap with previous pane                   ║
║ Ctrl-b }         Swap with next pane                       ║
╠════════════════════════════════════════════════════════════╣
║ RESIZING PANES                                             ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b Ctrl-↑    Resize pane up                            ║
║ Ctrl-b Ctrl-↓    Resize pane down                          ║
║ Ctrl-b Ctrl-←    Resize pane left                          ║
║ Ctrl-b Ctrl-→    Resize pane right                         ║
║ Drag border      Resize with mouse                         ║
╠════════════════════════════════════════════════════════════╣
║ HELP                                                        ║
╠════════════════════════════════════════════════════════════╣
║ Ctrl-b h         Toggle shortcuts in status bar            ║
║ Ctrl-b /         Show this help (you are here!)            ║
║ Ctrl-b ?         Show all keybindings                      ║
╚════════════════════════════════════════════════════════════╝

Press any key to close...
HELP
read -n 1"
